define(function(e,t,r){"use strict";function a(){}if("undefined"==typeof jQuery)var n=function(e){return document.querySelectorAll(e)[0]};else var n=function(e){return jQuery(e)[0]};var i=function(e){return 10>e?"0"+e:e};a.prototype.timer=function(e,t){var r={mode:"count",symbol:":,:,:",seconds:0,format:"hh:mm:ss",timeout:"",outTime:void 0},a=t||{};for(var s in r)"undefined"==typeof a[s]&&(a[s]=r[s]);var o,f=a.seconds,u=a.mode,v=a.format,m=a.timeout,l=a.outTime,c=a.symbol.split(",");"undefined"==typeof c[3]&&(c[3]="");var p,d,h,y,D=function(t){return"text"==n(e).type||"textare"==n(e).type?(n(e).value=t,!1):void(n(e).innerHTML=t)},M=function(){return p=i(parseInt(f/3600/24))+c[0],d=i(parseInt(f/3600))+c[1],h=i(parseInt(f/60%60))+c[2],y=i(parseInt(f%60))+c[3],/dd:hh:mm:ss/i.test(v)||(/hh:mm:ss/i.test(v)?p="":/mm:ss/i.test(v)?(p="",d="",h=i(parseInt(f/60))+c[2]):/ss/i.test(v)&&(p="",d="",h="",y=f)),0>f?(clearTimeout(o),o="",!1):(D(p+d+h+y),o=setTimeout(M,1e3),m>-1&&f-m==0&&l&&l(g),void("count"==u?f++:"countDown"==u&&f--))},g=function(){return{start:function(){o||(clearTimeout(o),M())},pause:function(){clearTimeout(o),o=""},stop:function(){clearTimeout(o),o="",f=0;var e=p?"00"+c[0]:"",t=d?"00"+c[1]:"",r=h?"00"+c[2]:"",n=y?"00"+c[3]:"";D(e+t+r+n)},reset:function(){f=a.seconds}}}();return M(),g},a.prototype.setDate=function(e){var t=new Date,r={day:0,format:"YY-MM-DD"},n=e||{};for(var a in r)"undefined"==typeof n[a]&&(n[a]=r[a]);var s=n.day,o=n.format;t.setDate(t.getDate()+s);var f=t.getFullYear(),u="-"+i(t.getMonth()+1),v="-"+i(t.getDate()),m="&nbsp;&nbsp;星期"+"日一二三四五六".charAt(t.getDay()),l="&nbsp;&nbsp;"+i(t.getHours()),c=":"+i(t.getMinutes()),p=":"+i(t.getSeconds());return/Y/i.test(o)||(f=""),/M/.test(o)||(u=""),/D/i.test(o)||(v=""),/w/i.test(o)||(m=""),/h/i.test(o)||(l=""),/m/.test(o)||(c=""),/s/i.test(o)||(p=""),(f+u+v+l+c+p+m).replace(/^-|^:|^&nbsp;&nbsp;/,"")},a.prototype.timestamp=function(e){var t=e.replace(/-/g,"/");return new Date(t).getTime()},a.prototype.diff=function(e,t,r){var r=r||"DD:hh:mm:ss",n=t-e,a="",s="",o="",f="";if(/DD:hh:mm:ss/i.test(r)){a=i(Math.floor(n/864e5))+"天";var u=n%864e5;s=i(Math.floor(u/36e5))+"小时";var v=u%36e5;o=i(Math.floor(v/6e4))+"分钟";var m=v%6e4;f=i(Math.round(m/1e3))+"秒"}else/D/i.test(r)?a=i(Math.floor(n/864e5)):/H/i.test(r)?s=i(Math.floor(n/36e5)):/M/i.test(r)?(o=i(Math.floor(n/6e4)),f=""):/S/i.test(r)&&(f=i(Math.floor(n/1e3)));return a+s+o+f},r.exports=new a});